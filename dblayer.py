import sqlite3

MALWARE_DATABASE = "malware.db"

class DBConnectionError(Exception):
    def __init__(self,msg):
        self.msg = msg
        Exception.__init__(self,msg)
    def getMessage(self):
        return self.msg



class DBLayer:
    '''
    DBLayer is the abstract layer between the business logic(service layer) and malware database.
    Its a singleton class which will give you a single instance for all the operations.
    '''
    class __DBConnection:
        def __init__(self):
            #TODO create db connections
            pass

        def fetch_blacklist_urls(self):
            #TODO fetch black listed MALWARE Urls from database
            pass

        def store_blacklist_url(self,url_id,host,port,url_path,qstring):
            #TODO store new black listed MALWARE Urls to the database
            pass

    __instance = None

    @classmethod
    def getInstance(cls):
        if DBLayer.__instance is None:
            DBLayer.__instance = DBLayer.__DBConnection()
        return DBLayer.__instance

