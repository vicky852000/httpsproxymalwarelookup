import unittest
from serviceCaller import *
from logger import CallerLogs
logger = CallerLogs.createServiceLogger()
import constants

dct_output = {'urls': [{'url_link': 'http://127.0.0.1:5000/urlinfo/100/10.10.1.35:10535/one/two?id=44&name=ankur', 'is_malware': 'True', 'error': False, 'url_id': 100}, {'url_link': 'http://127.0.0.1:5000/urlinfo/101/10.10.1.36:10536/one/two?id=44&name=ank2', 'is_malware': 'False', 'error': False, 'url_id': 101}, {'url_link': 'http://127.0.0.1:5000/urlinfo/102/10.10.1.37:10537/one/two?id=44&name=ank3', 'is_malware': 'False', 'error': False, 'url_id': 102}, {'url_link': 'http://127.0.0.1:5000/urlinfo/103/10.10.1.38:10538/one/two?id=44&name=ank4', 'is_malware': 'False', 'error': False, 'url_id': 103}, {'url_link': 'http://127.0.0.1:5000/urlinfo/101/10.10.1.36:10536/one/three?id=46&name=saurabh', 'is_malware': 'True', 'error': False, 'url_id': 101}, {'url_link': 'http://127.0.0.1:5000/urlinfo/102/10.10.1.37:10537/two/three?id=14&name=munni', 'is_malware': 'True', 'error': False, 'url_id': 102}, {'url_link': 'http://127.0.0.1:5000/urlinfo/103/10.10.1.38:10538/one/four?id=56&name=punit', 'is_malware': 'True', 'error': False, 'url_id': 103}, {'desc': 'Invalid url ankur/...', 'url_link': 'http://127.0.0.1:5000/ankur/', 'error': True}]}

class ServiceCaller(unittest.TestCase):
    def test_first(self):
        mem = getMemorySize()
        self.assertEqual(mem, 1024)

    def test_second(self):
        FILENAME = 'test_urls.txt'
        dct = {}
        dct['urls'] = []
        openFileAndLoadUrls(constants.TEST_FILENAME, dct)
        self.assertEqual(dct,dct_output)


if __name__== "__main__":
    unittest.main()

